<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{{ page.title }} · {{ site.title }}</title>
<link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
</head>
<body>
<main class="wrap">
  <nav class="crumbs"><a href="{{ '/' | relative_url }}">← All specs</a></nav>

  <header class="spec-head">
    <h1>{{ page.title }}</h1>
    <div class="meta">
      {% if page.id %}<span class="badge">ID {{ page.id }}</span>{% endif %}
      {% if page.status %}<span class="badge status-{{ page.status | downcase }}">{{ page.status }}</span>{% endif %}
      {% if page.owner %}<span class="badge">Owner {{ page.owner }}</span>{% endif %}
      {% if page.created_at %}<span class="badge">Created {{ page.created_at }}</span>{% endif %}
    </div>
  </header>

  {% assign base = page.url | replace: '/index.html','/' %}

  {% comment %} Discover sibling pages (hld / lld / api / ux) {% endcomment %}
  {% assign siblings = "" | split: "" %}
  {% for p in site.pages %}
    {% if p.url != page.url and p.url contains base and p.url != '/' %}
      {% assign siblings = siblings | push: p %}
    {% endif %}
  {% endfor %}

  {% if siblings.size > 0 %}
  <aside class="sibling">
    <h2>Related docs</h2>
    <ul>
      {% assign preferred = "hld, lld, api, ux" | split: ", " %}
      {% for key in preferred %}
        {% for s in siblings %}
          {% if s.url contains '/' | append: key | append: '.html' %}
            <li><a href="{{ s.url | relative_url }}">{{ s.title }}</a></li>
          {% endif %}
        {% endfor %}
      {% endfor %}
      {% for s in siblings %}
        {% unless s.url contains 'hld.html' or s.url contains 'lld.html' or s.url contains 'api.html' or s.url contains 'ux.html' %}
          <li><a href="{{ s.url | relative_url }}">{{ s.title }}</a></li>
        {% endunless %}
      {% endfor %}
    </ul>
  </aside>
  {% endif %}

  <article class="content">
    {{ content }}
  </article>
</main>
</body>
</html>
